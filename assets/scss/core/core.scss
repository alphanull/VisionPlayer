@use '../lib/mixins' as *;
@use 'mixins' as *;
@use 'vars' as *;

vision-player {
    @include font-normal;

    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    border: none;
    outline: none;
    background: var(--vip-bg);
    font-size: var(--vip-font-size);
    color: var(--color-text);
    line-height: 1.3;
    text-align: left;
    user-select: none;
    contain: strict;
    aspect-ratio: 16 / 9;
    -webkit-tap-highlight-color: transparent;

    // reset seome styles
    * {
        width: auto;
        height: auto;
        margin: 0;
        padding: 0;
        border: none;
        background: none;
    }

    *, *::before, *::after {
        box-sizing: border-box;
    }

    input {
        min-height: auto;
    }

    .vip-media-ele {
        @include transition('opacity');

        position: absolute;
        display: block;
        width: calc(100% + 2px);  /* stylelint-disable-line unit-disallowed-list */
        height: calc(100% + 2px); /* stylelint-disable-line unit-disallowed-list */
        top: -1px; /* stylelint-disable-line unit-disallowed-list */
        left: -1px; /* stylelint-disable-line unit-disallowed-list */
        background: none;
        background: var(--vip-media-bg);
        pointer-events: none;

        &::-webkit-media-controls-start-playback-button {
            // hide those iOS Native Controls on mobile safari
            display: none;
            opacity: 0;
            appearance: none;
            pointer-events: none;
        }

        &::-webkit-media-controls { display: none; }
    }

    &.layout-controller-only .vip-media-ele,
    &.has-no-media .vip-media-ele,
    &.is-pip .vip-media-ele,
    &.is-casting .vip-media-ele,
    &.is-audio:not(.is-airplay) .vip-media-ele,
    &.is-audio[data-useragent*=Safari]:not([data-useragent*=Chrome]):not(.is-airplay) .vip-media-ele {
        opacity: 0;
    }

    .vip-aspect-helper {
        position: relative;
        width: 100%;
        height: 0;
        padding-bottom: 56.25%;
        opacity: 0;
        pointer-events: none;
    }

    &.has-ar-transitions {
        @include transition('aspect-ratio');

        .vip-aspect-helper {
            @include transition('padding');
        }
    }

    &.has-aspect-patch { contain: layout paint style; }

    &.is-fullscreen { border-radius: 0; }

    &.layout-fill {
        @include inset;

        position: absolute;
    }

    &.is-portrait {
        width: auto !important;
        height: 100%;
    }

    &.layout-controller-only {
        overflow: visible;
        background: none;
        contain: layout style;
        aspect-ratio: auto;

        .vip-aspect-helper,
        .vip-visualizer { display: none; }
    }

    &.ui-hidden:hover:not(.is-disabled) { cursor: none; }
    &.is-clickable:hover:not(.ui-hidden) { cursor: pointer; }

    &.is-clickable.has-no-media:hover,
    &.is-clickable.is-disabled:hover { cursor: not-allowed; }

    &.is-audio:not(.is-airplay):not(.has-audio-analyser):not(.layout-controller-only) {
        @include icon-masked('player/audio.svg', 20vmin, var(--color-contrast5));
    }

    &.has-no-media {
        @include icon-masked('player/nomedia.svg', 20vmin, var(--color-contrast5));
    }
}
